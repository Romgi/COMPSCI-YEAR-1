<!doctype html>
<!--
An example of instant feedback for a form element.
Sam Scott, McMaster 2025.
-->
<html>

<head>
    <meta charset="utf-8">
    <title>Feedback Example</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        #form {
            background-color: lightblue;
            border-radius: 20px;
            max-width: 500px;
            padding: 20px;
            margin: auto;
            margin-top: 10px;
        }

        input {
            /* styles all input elements at once */
            display: block;
            width: 100%;
            padding: 10px;
            font-size: 24px;
            margin-top: 10px;
        }

        #form h1 {
            margin-top: 10px;
        }

        .warning {
            color: orangered;
            display: none;
        }
    </style>
    <script>
        window.addEventListener("load", function (event) {
            // Retrieve important DOM elements
            const userid = document.getElementById("userid");
            const userid_warning = document.getElementById("userid_warning");
            const userid2 = document.getElementById("userid2");
            const userid2_warning = document.getElementById("userid2_warning");
            const submitbutton = document.getElementById("submitbutton");

            // Model variables to track errors
            let userid_ok = false;
            let userid2_ok = false;


            /**
             * Checks length and match of userid fields, gives feedback
             **/
            function check_userids() {
                // start by assuming we're ok
                let ok = true;

                // check the first field's length
                if (userid.value.length < 8) {
                    ok = false; // we're not ok
                    userid_warning.style["display"] = "block";
                    userid.style["outline-color"] = "orangered"; // used when element has focus
                    userid.style["border-color"] = "orangered";
                } else {
                    userid_warning.style["display"] = "none";
                    userid.style["outline-color"] = "";
                    userid.style["border-color"] = "";
                }

                // check second field matches first
                if (userid2.value !== userid.value) {
                    ok = false; // we're not ok
                    userid2_warning.style["display"] = "block";
                    userid2.style["outline-color"] = "orangered"; // used when element has focus
                    userid2.style["border-color"] = "orangered";
                } else {
                    userid2_warning.style["display"] = "none";
                    userid2.style["outline-color"] = "";
                    userid2.style["border-color"] = "";
                }

                // enable/disable submit button
                submitbutton.disabled = !ok;
            }

            // add event listeners to input fields
            userid.addEventListener("input", check_userids);
            userid2.addEventListener("input", check_userids);

            /**
             * Function stub to submit the userids.
             **/
            submitbutton.addEventListener("click", function (event) {
                alert("Submitted!");
            });
        });
    </script>
</head>

<body>
    <div id="form">
        <h1>Pick a User ID</h1>
        <input id="userid" type="text" placeholder="userid">
        <p id="userid_warning" class="warning">Userid is too short.</p>
        <input id="userid2" type="text" placeholder="confirm userid">
        <p id="userid2_warning" class="warning">Userids do not match.</p>
        <input id="submitbutton" type="button" value="submit" disabled>
    </div>
</body>

</html>