<!DOCTYPE html>
<html>

<head>
    <title>Canvas Test Bed</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <style type="text/css">
        #testCanvas {
            background-color: #0b0f2e;
            margin: 30px;
        }
        body {
            text-align: center;
            color: #e6e6f0;
            background-color: #1b2238;
        }
    </style>
    <script>
        window.addEventListener("load", function () {
            const canvas = document.getElementById("testCanvas");
            const ctx = canvas.getContext("2d");

            const buttons = document.querySelectorAll('input[type="button"]');
            const btn1 = buttons[0];
            const btn2 = buttons[1];
            const btn3 = buttons[2];
            const btn4 = buttons[3];

            const houseBaseY = 300;
            const groundY = houseBaseY + 35;
            const houseWidth = 60;
            const houseHeight = 40;
            const roofHeight = 25;
            const houseSpacing = 20;

            let nextHouseX = 20;
            let lastHouseX = null;

            function drawNightBackground() {
                ctx.fillStyle = "#0b0f2e";
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.strokeStyle = "#cfd3ff";
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, groundY);
                ctx.lineTo(canvas.width, groundY);
                ctx.stroke();
            }

            function drawCheckerboard() {
                const size = canvas.width / 8;
                for (let row = 0; row < 8; row++) {
                    for (let col = 0; col < 8; col++) {
                        ctx.fillStyle = (row + col) % 2 === 0
                            ? "rgba(255, 255, 255, 0.5)"
                            : "rgba(80, 90, 120, 0.4)";
                        ctx.fillRect(col * size, row * size, size, size);
                    }
                }
            }

            function drawHouse(x) {
                ctx.strokeStyle = "#ffffff";
                ctx.lineWidth = 2;

                ctx.strokeRect(x, houseBaseY - houseHeight, houseWidth, houseHeight);

                ctx.beginPath();
                ctx.moveTo(x, houseBaseY - houseHeight);
                ctx.lineTo(x + houseWidth / 2, houseBaseY - houseHeight - roofHeight);
                ctx.lineTo(x + houseWidth, houseBaseY - houseHeight);
                ctx.stroke();

                ctx.strokeRect(x + houseWidth * 0.4, houseBaseY - 20, houseWidth * 0.2, 20);
            }

            function drawCar(x) {
                if (x === null) {
                    return;
                }

                const carY = groundY;
                const carWidth = 50;
                const carHeight = 18;
                const carX = x + (houseWidth - carWidth) / 2;

                ctx.strokeStyle = "#ffffff";
                ctx.lineWidth = 2;

                ctx.strokeRect(carX, carY - carHeight, carWidth, carHeight);
                ctx.beginPath();
                ctx.moveTo(carX + 8, carY - carHeight);
                ctx.lineTo(carX + 18, carY - carHeight - 10);
                ctx.lineTo(carX + 34, carY - carHeight - 10);
                ctx.lineTo(carX + 44, carY - carHeight);
                ctx.stroke();

                ctx.beginPath();
                ctx.arc(carX + 12, carY, 4, 0, Math.PI * 2);
                ctx.arc(carX + 38, carY, 4, 0, Math.PI * 2);
                ctx.stroke();
            }

            function drawStar(x, y, color) {
                const r = 5;
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(x, y - r);
                ctx.lineTo(x + r * 0.6, y + r);
                ctx.lineTo(x - r, y - r * 0.2);
                ctx.lineTo(x + r, y - r * 0.2);
                ctx.lineTo(x - r * 0.6, y + r);
                ctx.closePath();
                ctx.stroke();
            }

            function randomColor() {
                const r = Math.floor(120 + Math.random() * 135);
                const g = Math.floor(120 + Math.random() * 135);
                const b = Math.floor(120 + Math.random() * 135);
                return `rgb(${r}, ${g}, ${b})`;
            }

            btn1.addEventListener("click", function () {
                drawCheckerboard();
            });

            btn2.addEventListener("click", function () {
                drawHouse(nextHouseX);
                lastHouseX = nextHouseX;
                nextHouseX += houseWidth + houseSpacing;
            });

            btn3.addEventListener("click", function () {
                drawCar(lastHouseX);
            });

            btn4.addEventListener("click", function () {
                drawStar(20, 20, "gold");

                const skyMaxY = houseBaseY - houseHeight - roofHeight - 10;
                const x = 10 + Math.random() * (canvas.width - 20);
                const y = 10 + Math.random() * (skyMaxY - 10);
                drawStar(x, y, randomColor());
            });

            drawNightBackground();
        });
    </script>
</head>

<body>
    <h1>Canvas Test Bed 4</h1>
    <canvas id="testCanvas" width="400" height="400"></canvas>
    <br>
    <input type="button" value="Button 1">
    <input type="button" value="Button 2">
    <input type="button" value="Button 3">
    <input type="button" value="Button 4">
</body>

</html>
